<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Usuario</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; padding: 40px; display: flex; justify-content: center; }
    .card { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
    h1 { text-align: center; color: #333; margin-bottom: 25px; }
    
    .form-group { margin-bottom: 15px; position: relative; }
    
    input { 
      width: 100%; padding: 10px; border: 2px solid #ccc; border-radius: 5px; 
      font-size: 14px; box-sizing: border-box; transition: border-color 0.3s;
    }

    /* --- Estilos para el input con imagen (ojo) --- */
    .pass-wrapper { position: relative; display: flex; align-items: center; }
    
    .toggle-password {
      position: absolute; 
      right: 10px; 
      cursor: pointer; 
      width: 22px; /* Ajusta el tamaño de tus iconos aquí */
      height: auto;
      user-select: none;
      opacity: 0.6;
    }
    .toggle-password:hover { opacity: 1; }

    .error { color: #e74c3c; font-size: 12px; margin-top: 5px; min-height: 15px; margin-bottom: 0; }
    
    /* --- Medidor de Fuerza --- */
    .meter-container { height: 6px; width: 100%; background-color: #eee; border-radius: 3px; margin-top: 8px; display: none; overflow: hidden; }
    .meter-bar { height: 100%; width: 0%; transition: all 0.4s ease; }
    .strength-text { font-size: 12px; font-weight: bold; margin-top: 5px; display: block; }

    button { 
      padding: 12px; width: 100%; background-color: #007bff; color: white; 
      border: none; border-radius: 5px; font-size: 16px; cursor: pointer; font-weight: bold; margin-top: 10px;
    }
    button:disabled { background-color: #bdc3c7; cursor: not-allowed; }
    
    #resultado { margin-top: 20px; font-weight: bold; text-align: center; }
  </style>
</head>
<body>

<div class="card">
  <h1>Registro</h1>

  <div class="form-group">
    <input type="text" id="nombre" placeholder="Nombre completo" oninput="validarNombre()">
    <p id="errorNombre" class="error"></p>
  </div>

  <div class="form-group">
    <input type="text" id="email" placeholder="Email" oninput="validarEmail()">
    <p id="errorEmail" class="error"></p>
  </div>

  <div class="form-group">
    <div class="pass-wrapper">
      <input type="password" id="password" placeholder="Contraseña" oninput="validarPassword()">
      <img src="Imagenes/show.png" class="toggle-password" id="imgPass" onclick="toggleVisibility('password', this)" alt="Ver">
    </div>
    <div class="meter-container" id="meterContainer">
      <div class="meter-bar" id="meterBar"></div>
    </div>
    <span id="strengthText" class="strength-text"></span>
    <p id="errorPassword" class="error"></p>
  </div>

  <div class="form-group">
    <div class="pass-wrapper">
      <input type="password" id="confirmar" placeholder="Confirmar contraseña" oninput="validarConfirmar()">
      <img src="Imagenes/show.png" class="toggle-password" id="imgConf" onclick="toggleVisibility('confirmar', this)" alt="Ver">
    </div>
    <p id="errorConfirmar" class="error"></p>
  </div>

  <button id="btnRegistrar" onclick="registrar()" disabled>Crear Cuenta</button>
  <div id="resultado"></div>
</div>

<script>
    // 1. FUNCIÓN PARA MOSTRAR/OCULTAR CONTRASEÑA
    function toggleVisibility(id, el) {
      const input = document.getElementById(id);
      
      // Asegúrate que estos nombres coincidan con tus archivos en la carpeta Imagenes
      const imagenMostrar = "Imagenes/hide.png";
      const imagenOcultar = "Imagenes/show.png";

      if (input.type === "password") {
        input.type = "text";
        el.src = imagenOcultar; 
      } else {
        input.type = "password";
        el.src = imagenMostrar;
      }
    }

    // 2. VALIDACIÓN DE NOMBRE
    function validarNombre() {
      let val = document.getElementById("nombre").value;
      let input = document.getElementById("nombre");
      let err = document.getElementById("errorNombre");
      
      let valida = val.length >= 3;
      err.innerHTML = valida ? "" : "Mínimo 3 caracteres.";
      input.style.borderColor = valida ? "#2ecc71" : "#e74c3c";
      actualizarBoton();
    }

    // 3. VALIDACIÓN DE EMAIL
    function validarEmail() {
      let val = document.getElementById("email").value;
      let input = document.getElementById("email");
      let err = document.getElementById("errorEmail");
      
      // Validación básica de email
      let valida = val.includes("@") && val.includes(".");
      err.innerHTML = valida ? "" : "Email no válido.";
      input.style.borderColor = valida ? "#2ecc71" : "#e74c3c";
      actualizarBoton();
    }

    // 4. FUERZA DE CONTRASEÑA
    function validarPassword() {
      const pass = document.getElementById("password").value;
      const input = document.getElementById("password");
      const err = document.getElementById("errorPassword");
      const meter = document.getElementById("meterContainer");
      const bar = document.getElementById("meterBar");
      const txt = document.getElementById("strengthText");

      if (pass.length === 0) {
        meter.style.display = "none";
        txt.innerHTML = "";
        input.style.borderColor = "#ccc";
        actualizarBoton();
        return;
      }

      meter.style.display = "block";
      let strength = 0;

      // Criterios
      if (pass.length >= 6) strength++;
      if (pass.length >= 10) strength++;
      if (/[A-Z]/.test(pass)) strength++; // Tiene Mayúscula
      if (/[0-9]/.test(pass)) strength++; // Tiene Número
      if (/[^A-Za-z0-9]/.test(pass)) strength++; // Tiene Especial

      // Colores y textos según fuerza
      if (strength <= 2) {
        bar.style.width = "33%"; bar.style.backgroundColor = "#e74c3c";
        txt.innerHTML = "Seguridad: Baja"; txt.style.color = "#e74c3c";
      } else if (strength <= 4) {
        bar.style.width = "66%"; bar.style.backgroundColor = "#f1c40f";
        txt.innerHTML = "Seguridad: Media"; txt.style.color = "#f39c12";
      } else {
        bar.style.width = "100%"; bar.style.backgroundColor = "#2ecc71";
        txt.innerHTML = "Seguridad: Alta"; txt.style.color = "#2ecc71";
      }

      // Validar longitud mínima para el borde
      let valida = pass.length >= 6;
      input.style.borderColor = valida ? "#2ecc71" : "#e74c3c";
      err.innerHTML = valida ? "" : "Mínimo 6 caracteres.";
      
      validarConfirmar();
      actualizarBoton();
    }

    // 5. VALIDAR COINCIDENCIA
    function validarConfirmar() {
      let p1 = document.getElementById("password").value;
      let p2 = document.getElementById("confirmar").value;
      let input = document.getElementById("confirmar");
      let err = document.getElementById("errorConfirmar");

      if (p2.length > 0) {
        let coincide = (p1 === p2);
        err.innerHTML = coincide ? "" : "Las contraseñas no coinciden.";
        input.style.borderColor = coincide ? "#2ecc71" : "#e74c3c";
      } else {
        err.innerHTML = "";
        input.style.borderColor = "#ccc";
      }
      actualizarBoton();
    }

    // 6. ACTIVAR/DESACTIVAR BOTÓN
    function actualizarBoton() {
      const n = document.getElementById("nombre").value;
      const e = document.getElementById("email").value;
      const p = document.getElementById("password").value;
      const c = document.getElementById("confirmar").value;
      
      const formValido = (n.length >= 3 && e.includes("@") && e.includes(".") && p.length >= 6 && p === c);
      document.getElementById("btnRegistrar").disabled = !formValido;
    }

    // 7. ACCIÓN FINAL
    function registrar() {
      document.getElementById("resultado").innerHTML = "<span style='color:green'>✅ ¡Registro completado con éxito!</span>";
    }
</script>

</body>
</html>